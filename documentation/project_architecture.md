# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```mermaid
graph TD;   
    A -->|–õ–æ–∫–∞–ª—å–Ω—ã–π| E[Ollama –∏ –¥—Ä]  
    A -->|–£–¥–∞–ª–µ–Ω–Ω—ã–π| E1[OpenAI API]  

    A[–ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å] --> C[–ú–æ–¥—É–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö]  
    A --> D[–ú–æ–¥—É–ª—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤]  
    
    D --> D1[Telegram –±–æ—Ç]  
    D --> D2[–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å]  
    D --> D3[–ü—Ä–æ—á–µ–µ...]  

```



## –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤


### 1. **–ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å**  
   - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Ö–æ–¥—è—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã.  
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤–∫–ª—é—á–∞–µ—Ç —Ü–µ–Ω–∑—É—Ä—É, –∑–∞—â–∏—Ç—É –æ—Ç –ø—Ä–æ–º–ø—Ç-–∏–Ω–∂–µ–∫—Ç–∞ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å LLM.  
   - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫:  
     - **–õ–æ–∫–∞–ª—å–Ω—ã–º –º–æ–¥–µ–ª—è–º** (—á–µ—Ä–µ–∑ Ollama –∏ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã).  
     - **–£–¥–∞–ª—ë–Ω–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º** (—Ç–∞–∫–∏–º –∫–∞–∫ OpenAI API).  
---

### **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è**

```mermaid  
---
config:
  theme: forest
---
mindmap
  root((**–ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å**))
    API üîó
      OpenAPIHost üåê
    Services üõ†Ô∏è
      LLM ü§ñ
      RAG üóÑÔ∏è
      Security üîí
      User üë•
    Utils üîß
      EnvLoader üîë
      Logger üìù
    Config ‚öôÔ∏è

```



### –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π  

1. **API**  
   - **OpenAPIHost**: –•–æ—Å—Ç–∏–Ω–≥ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ FastAPI) –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.  
---
1. **Services**  
   - **LLMService**: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ OpenAI API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
   - **DBService**: –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏.  
   - **SecurityService** _–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù_:  
      - –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –ø–æ–≤–µ–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.  
      - –û—Ç—Å–µ–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏ –∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏.   
    - **UserService**:
      - **–§—É–Ω–∫—Ü–∏–∏:**  
        1. –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤).  
        2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã—à–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ).  
        3. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–∏–ø–∞ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è (–≥–æ—Ä—è—á–∞—è/—Ö–æ–ª–æ–¥–Ω–∞—è –≤–æ–¥–∞, —Ç–µ–ø–ª–æ, —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ).  
        4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–∞—Å–∞—é—â–∏—Ö—Å—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.  
      - **–ü—Ä–∏–º–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:**  
       1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –ø–æ–∫–∞–∑–∞–Ω–∏—è–º–∏:  
          ```
          –ì–æ—Ä—è—á–∞—è –≤–æ–¥–∞ 250.12, —Ö–æ–ª–æ–¥–Ω–∞—è –≤–æ–¥–∞ 300.45  
          ```
          **UserService** —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–∏–ø—ã –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏—Ö –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ **DBService**.  

       2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ:  
          ```
          –ö–∞–∫–∏–µ –±—ã–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –≥–æ—Ä—è—á–µ–π –≤–æ–¥—ã?  
          ```
          **UserService** –∏—â–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç.  

       3. –ó–∞–ø—Ä–æ—Å —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏:  
          ```
          –ì–æ—Ä—è—á–∞—è –≤–æ–¥–∞ 200.00  
          ```
          **UserService** –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å, —Ç–∞–∫ –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∏–∂–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ.  

2. **Utils**  
   - **EnvLoader**: –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ –∫–ª—é—á–∏ API, –∞–¥—Ä–µ—Å–∞ –∏ –ø–∞—Ä–æ–ª–∏.  
   - **Logger**: –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏.  

3. **Config**  
   - **Settings**: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ –ø–æ—Ä—Ç, –∞–¥—Ä–µ—Å–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, API –∫–ª—é—á–∏.  
   - **Schemas**: JSON-—Å—Ö–µ–º—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. _–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù_

---


### 2. **–ú–æ–¥—É–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**  
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.  
   - –†–µ–∞–ª–∏–∑—É–µ—Ç –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º.  
---
### 3. **–ú–æ–¥—É–ª—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**  
   - –†–µ–∞–ª–∏–∑—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑:  
     - **Telegram –±–æ—Ç** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.  
     - **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä.  
     - **–î—Ä—É–≥–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º.  
  
---


## –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ LLM —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π  

   1. **LLMService** –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ, –Ω–æ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ **UserService**.  
   2. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –∫–∞—Å–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π, **LLMService** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é Retrieval-Augmented Generation (RAG) –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ—Ç–≤–µ—Ç–∞.  

#### –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π  

- **SecurityService** _–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù_:  
  - –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –ø–æ–≤–µ–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.  
  - –û—Ç—Å–µ–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏ –∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏.  